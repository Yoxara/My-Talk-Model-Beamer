\usepackage{tikz}
\usetikzlibrary{arrows.meta, decorations.pathreplacing, decorations.markings, patterns, calc}
\usetikzlibrary{decorations.pathmorphing}
\definecolor{cobalt}{rgb}{0.0, 0.28, 0.67}

\usetikzlibrary{arrows.meta}

\tikzset{
%>=triangle 45,
pos=.8,
scalar/.style={decorate, dashed, draw=cobalt},
photon/.style={decorate, thick,decoration={snake,segment length=8,post length=1mm,pre length = 1.5mm}},
boson/.style={decorate, thick,draw=cobalt,decoration={snake,segment length=5,post length=1mm,pre length = 1mm}},
particle/.style={draw=black, postaction={decorate}},
fermion/.style={draw=black, postaction={decorate}, decoration={markings,mark=at position .5 with {\arrow[draw=black,scale=1.5,>=stealth]{>}}}},
antifermion/.style={draw=black, postaction={decorate},decoration={markings,mark=at position .5 with {\arrow[draw=black,scale=1.5,>=stealth]{<}}}},
gluon/.style={decorate, draw=black,decoration={coil,amplitude=4pt, segment length=5pt}},
gluon_sm/.style={decorate, draw=black,decoration={coil,amplitude=4pt, segment length=5pt}},
BSM/.style={draw=cobalt, postaction={decorate}, thick,decoration={segment length=8}},
SM/.style={draw=black, postaction={decorate}, thick,decoration={segment length=5}},
}

\newenvironment{diagramBI}{
    \begin{center}
    \begin{tikzpicture}[scale=1.3]
}{
    \end{tikzpicture}
    \end{center}
}

\newenvironment{diagram}{
    \begin{center}
    \begin{tikzpicture}[scale=0.5]
}{
    \end{tikzpicture}
    \end{center}
}


% Comandos para diagramas
\newcommand\XtoXg{
\begin{diagramBI}
    % Incoming X1 and X2
    \draw[photon] (0,2.5) -- (1,1.5) node[at start, left] {$X_{1}$};
    \draw[photon] (1,1.5) -- (2,2.5) node[at end, right] {$X_{2}$};
    % Photon interaction
    \draw[photon] (1,1.5) -- (1,0) node[midway, right] {$\gamma$};
    % Incoming fermion and antifermion
    \draw[fermion] (0,-0.5) -- (1,0) node[at start, left] {$q$};
    \draw[antifermion] (1,0) -- (2,-0.5) node[at end, right] {$\bar{q}$};
    % Dots
    \filldraw[cobalt] (1,1.5) circle (1pt);  % Vertex X1-X2-gamma
    \filldraw[cobalt] (1,0) circle (1pt);    % Vertex gamma-qqbar
\end{diagramBI}
}

\newcommand\QuarkGluonToX{
\begin{diagramBI}
    % Incoming quark and gluon
    \draw[fermion] (0,2.5) -- (1,2.5) node[at start, left] {$q$};
    \draw[gluon] (0,1.5) -- (1,1.5) node[at start, left] {$g$};
    % Quark propagating in the t-channel
    \draw[fermion] (1,2.5) -- (1,1.5);
    % Jet
    \draw[fermion] (1,1.5) -- (2,1.5) node[at end, right] {$j$};
    % Photon emission
    \draw[photon] (1,2.5) -- (2,2.5) node[at end, anchor=south west, xshift=-0.7cm, yshift=0.0cm] {$\gamma^{\star}$};
    % X2 decay to X1 and gamma
    \draw[photon] (2,2.5) -- (3,3.0) node[midway, yshift=0.35cm] {$X_{2}$};
    \draw[photon] (2,2.5) -- (3,2.0) node[at end, right] {$X_{1}$};
    \draw[photon] (3.0,3.0) -- (3.6, 3.6) node[at end, right] {$X_{1}$};
    \draw[photon] (3.0,3.0) -- (3.6,2.5) node[at end, right] {$\gamma$};
    
    % Dots
    \filldraw[cobalt] (3.,3) circle (1.5pt);  % Vertex 
    \filldraw[cobalt] (2,2.5) circle (1.5pt);  % Vertex X2 decay   
\end{diagramBI}
}
\newcommand\smsmDMDMschannel{
\begin{diagram}
  \node at (-0.1,3.0) {\textcolor{black}{\scriptsize SM}};
    \node at (-0.1,0.07) {\textcolor{black}{\scriptsize SM}};
    \node at (4.1,3.1) {\textcolor{cobalt}{\scriptsize DM}};
    \node at (4.1,-0.1) {\textcolor{cobalt}{\scriptsize DM}};
    \draw[SM] (0,2.8) to (1,1.5);
    \draw[SM] (0,0.2) to (1,1.5);
    \draw[BSM] (1,1.5) to (3,1.5);
    \draw[BSM] (3,1.5) to (4,2.9);
    \draw[BSM] (3,1.5) to (4,0.1);
    \draw[SM] (1.7,2.9) to  (0.64,2.0);
    \node at (2.1,3.0) {\textcolor{black}{\scriptsize SM}};
    \node at (3.5,1.5)   { $g_{\chi}$};
    \node at (0.35,1.5)   { $g_{q, \, \ell}$};
\end{diagram}
}

\newcommand\smsmSMSMschannel{
\begin{diagram}
  \node at (-0.1,3.1) {\textcolor{black}{\scriptsize SM}};
    \node at (-0.1,0.07) {\textcolor{black}{\scriptsize SM}};
    \node at (4.1,3.1) {\textcolor{black}{\scriptsize SM}};
    \node at (4.1,-0.1) {\textcolor{black}{\scriptsize SM}};
    \draw[SM] (0,2.8) to (1,1.5);
    \draw[SM] (0,0.2) to (1,1.5);
    \draw[BSM] (1,1.5) to (3,1.5);
    \draw[SM] (3,1.5) to (4,2.9);
    \draw[SM] (3,1.5) to (4,0.1);
    \draw[SM] (1.7,2.9) to  (0.64,2.0);
    \node at (2.1,3.0) {\textcolor{black}{\scriptsize SM}};
    \node at (3.55,1.5)   { $g_{q, \, \ell}$};
    \node at (0.35,1.5)   { $g_{q, \, \ell}$};
\end{diagram}
}

\newcommand{\smsmDMDMtchannel}{
\begin{diagram}
    \node at (-0.4,3.1) {\textcolor{black}{\scriptsize SM}};
    \node at (-0.2,-1.5) {\textcolor{black}{\scriptsize SM}};
    \node at (2.45,3.1) {\textcolor{cobalt}{\scriptsize DM}};
    \node at (2.3,-1.5) {\textcolor{cobalt}{\scriptsize DM}};
    \draw[SM] (-0.3,2.9) to (1.0,1.5);
    \draw[BSM] (1,-0.0) to (2.3,-1.3);
    \draw[BSM] (1,-0.0) to (1,1.5);
    \draw[BSM] (1,1.5) to (2.3,2.9);
    \draw[SM] (1,-0.0) to (-0.3,-1.3);
    \draw[SM] (1.3,2.8) to  (0.5,2.0);
    \node at (1.4,3.) {\textcolor{black}{\scriptsize SM}};
    \node at (1.6,1.5) { $g_{q \chi}$};
    \node at (1.6,0.0) { $g_{q \chi}$};
\end{diagram}
}


\newcommand{\smsmDMDMscalar}{
\begin{diagram}
    \node at (0.0,3.1) {\textcolor{black}{ $g$}};
    \node at (0.0,-0.1) {\textcolor{black}{ $g$}};
    \node at (4.1,3.1) {\textcolor{cobalt}{\scriptsize DM}};
    \node at (4.1,-0.1) {\textcolor{cobalt}{\scriptsize DM}};
  %  \draw[SM] (-0.9,4.1) to (0.0,2.8);
  %  \draw[SM] (0.9,4.1) to (0.0,2.8);
  %  \node at (-1.1,4.3) {\textcolor{black}{\scriptsize SM}};
   % \node at (1.1,4.3) {\textcolor{black}{\scriptsize SM}};
    \draw[gluon_sm] (0,2.8) to (0.8,2.2);
    \draw[gluon_sm] (0, 0.2) to (0.8,0.8);
    \draw[SM] (0.75,2.23) to (0.75,0.75);
    \draw[SM] (0.8,0.8) to (1.7,1.5);
    \draw[SM] (0.8,2.2) to (1.7,1.5);
    \draw[scalar] (1.7,1.5) to (3,1.5);
    \node at (2.3,1.2) {\textcolor{cobalt}{\scriptsize S/P}};
    \draw[BSM] (3,1.5) to (4,2.9);
    \draw[BSM] (3,1.5) to (4,0.1);
    \draw[SM] (2.,3) to  (1.22,1.86);
    \node at (2.2,3.25) {\textcolor{black}{\scriptsize SM}};
    \node at (3.5,1.5) { $g_{\chi}$};
    \node at (1.84,1.84)   { $g^q$};
%    \node at (1.1,1.5) {$t$};
 %   \node at (6.0, 1.5)  {$ \dots $ \hspace{7cm}};
\end{diagram}
}

\newcommand{\EFT}{
\begin{diagram}
    \node at (-0.1,2.7) {\textcolor{black}{\scriptsize SM}};
    \node at (-0.1,0.1) {\textcolor{black}{\scriptsize SM}};
    \node at (3.0,2.7) {\textcolor{cobalt}{\scriptsize DM}};
    \node at (3.0,0.1) {\textcolor{cobalt}{\scriptsize DM}};
    \draw[SM] (0,2.5) -- (1.5,1.5);
    \draw[SM] (0,0.3) -- (1.5,1.5);
    \draw[BSM] (1.5,1.5) -- (3,2.5);
    \draw[BSM] (1.5,1.5) -- (3,0.3);
    \filldraw[gray] (1.5,1.5) circle (20pt);
\end{diagram}
}